<!DOCTYPE html>
<html lang="ja">
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

<meta charset="UTF-8">
<title>SNSãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>

<style>

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  overflow: hidden;   /* â† ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’å®Œå…¨ã«æ­¢ã‚ã‚‹ */
}

body{
  background:#b0b0b0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
}

.phone{
  width:375px;height:730px;margin:20px auto;
  background:#000;border-radius:28px;
  box-shadow:0 0 30px rgba(0,0,0,.4);
  overflow:hidden;position:relative;
}

.statusbar{
  height:28px;color:#fff;font-size:12px;
  padding:0 12px;display:flex;
  justify-content:space-between;align-items:center;
}

.home{
  position:absolute;top:28px;left:0;
  width:100%;height:calc(100% - 28px);
  background:linear-gradient(180deg,#5f9cff,#a1c4fd);
  display:grid;grid-template-columns:repeat(4,1fr);
  gap:18px;padding:30px 20px;
}
.app{text-align:center;color:#fff;font-size:12px;cursor:pointer;}
.app-icon{
  width:64px;height:64px;border-radius:16px;
  background:#000;font-size:30px;
  display:flex;align-items:center;justify-content:center;
  margin:0 auto 6px;
}

/* Instagramã‚¢ã‚¤ã‚³ãƒ³ */
.app-icon.instagram{
  background:linear-gradient(45deg,#f58529,#dd2a7b,#8134af);
  font-size:0;
}
.app-icon.instagram svg{
  width:34px;
  height:34px;
  fill:#fff;
}

.appscreen{
  position:absolute;top:28px;left:0;
  width:100%;height:calc(100% - 28px);
  background:#fff;display:flex;
  flex-direction:column;overflow:hidden;
}
.hidden{display:none}
.header{
  height:44px;display:flex;align-items:center;
  border-bottom:1px solid #e6ecf0;font-weight:700;
}
.back{width:44px;text-align:center;cursor:pointer;}
.title{flex:1;text-align:center;}
.progress{height:6px;background:#e6ecf0;}
.timeline{
  flex:1;overflow-y:auto;
  padding:0 12px;font-size:15px;
}

.story.me .story-ring{
  background:none;
  padding:0;
}
.story.me .story-inner{
  border:1px solid #ccc;
}


/* ===== Instagramé¢¨ ===== */

/* ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ */
.stories{
  display:flex;
  gap:14px;
  padding:10px 12px;
  overflow-x:auto;
  border-bottom:1px solid #e6ecf0;
}
.story{
  text-align:center;
  font-size:11px;
  color:#333;
  cursor:pointer;
}
.story-ring{
  width:56px;
  height:56px;
  border-radius:50%;
  background:linear-gradient(45deg,#f58529,#dd2a7b,#8134af);
  padding:3px;
  margin-bottom:4px;
}
.story-inner{
  width:100%;
  height:100%;
  border-radius:50%;
  background:#ddd;
}

/* ãƒ•ã‚£ãƒ¼ãƒ‰ */
.insta-feed{padding:12px;}
.insta-post{
  border:1px solid #ddd;
  border-radius:10px;
  margin-bottom:14px;
  overflow:hidden;
}
.insta-header{
  padding:8px;
  font-weight:700;
}
.insta-photo{
  height:180px;
  background:linear-gradient(135deg,#ddd,#bbb);
}
.insta-actions{
  padding:8px;
  font-size:14px;
  color:#555;
}

/* ===== ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å†ç”Ÿï¼ˆæ‚ªå£å‹•ç”»é¢¨ï¼‰ ===== */
.story-view{
  position:absolute;
  top:28px;left:0;
  width:100%;height:calc(100% - 28px);
  background:#000;
  color:#fff;
  display:flex;
  flex-direction:column;
  z-index:50;
}
.story-view.hidden{display:none;}
.story-top{
  padding:10px;
  display:flex;
  justify-content:space-between;
  font-size:14px;
}
.story-video{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,#111,#333);
  position:relative;
}
.story-text{
  position:absolute;
  bottom:100px;
  left:20px;
  right:20px;
  font-size:22px;
  font-weight:700;
  line-height:1.4;
  text-shadow:0 0 8px #000;
}
.story-close{
  cursor:pointer;
}

/* ===== Xæ—¢å­˜ ===== */
.post,.reply{
  display:flex;gap:10px;
  padding:12px 0;border-bottom:1px solid #e6ecf0;
}
.reply{border-bottom:none;}
.icon{width:42px;height:42px;border-radius:50%;background:#1d9bf0;}
.reply .icon{width:32px;height:32px;background:#aab8c2;}
.body{flex:1;cursor:pointer;}
.name{font-weight:700;}
.id{color:#536471;font-size:13px;margin-left:4px;}
.text{margin:6px 0;white-space:pre-wrap;}
.meta{
  display:flex;flex-wrap:wrap;
  gap:12px;font-size:13px;
  color:#536471;margin-top:6px;
}
.replies-box{display:none;margin-top:6px;}

.compose{border-top:1px solid #e6ecf0;padding:8px;}
.compose textarea{
  width:100%;height:70px;resize:none;
  border:1px solid #ccc;border-radius:10px;padding:6px;
}
.compose select{
  width:100%;padding:6px;margin-bottom:6px;
  border-radius:8px;border:1px solid #ccc;
}
.compose button{
  width:100%;
box-sizing: border-box;   /* â† ã“ã‚Œã‚’è¿½åŠ  */
margin-top:6px;padding:10px;
  border:none;border-radius:999px;
  background:#1d9bf0;color:#fff;
}

.warning{
  background:#fff3cd;
  border:1px solid #ffecb5;
  color:#664d03;
  padding:10px;
  margin:10px 0;
  font-size:14px;
  border-radius:8px;
}
.warning strong{color:#d00000}


.story-bottom{
  height:64px;
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px;
  background:rgba(0,0,0,0.6);
}
.story-message{
  flex:none;        /* æ¨ªã„ã£ã±ã„ã‚’ã‚„ã‚ã‚‹ */
  width: 70%;
  height:44px;
  border-radius:999px;
  border:1px solid #555;
  background:#111;
  color:#fff;
  padding:0 14px;
  font-size:14px;
}
.story-like{
  width:44px;
  height:44px;
  border-radius:50%;
  border:1px solid #555;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:20px;
  cursor:pointer;
}
.story-like.active{
  color:#ff4d6d;
  border-color:#ff4d6d;
}



/* é€šçŸ¥ãƒãƒƒã‚¸ */
.badge{
  position:absolute;
  top:-6px;
  right:-6px;
  background:#f4212e;
  color:#fff;
  font-size:11px;
  width:18px;
  height:18px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
}
.app-icon{
  position:relative;
}



.compose-modal.hidden{
  display: none !important;
}




/* ===== ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ä¸‹éƒ¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼šç”»é¢ä¸‹å›ºå®šï¼ˆä¸Šæ›¸ãï¼‰ ===== */
.story-bottom{
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 64px;

  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;

  background: rgba(0,0,0,0.75);
  box-sizing: border-box;
}


/* ===== ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ä¸‹éƒ¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼šã‚³ãƒ³ãƒ‘ã‚¯ãƒˆç‰ˆ ===== */
.story-bottom{
  height: 50px;          /* 64 â†’ 52 */
  padding: 6px 8px;
}

.story-message{
  height: 30px;          /* 44 â†’ 36 */
  font-size: 13px;       /* å°‘ã—å°ã•ã */
  padding: 0 12px;
}

.story-like{
  width: 28px;           /* 44 â†’ 36 */
  height: 28px;
  font-size: 12px;       /* 20 â†’ 18 */
}

/* ===== ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ä¸‹éƒ¨ï¼šä¸­å¤®å¯„ã›ï¼‹å¹…èª¿æ•´ ===== */
.story-bottom{
  justify-content: center;   /* ä¸­å¤®å¯„ã› */
}

.story-message{
  flex: none;                /* ä¼¸ã³ã‚‹ã®ã‚’æ­¢ã‚ã‚‹ */
  width: 200px;              /* â† å¥½ã¿ã§èª¿æ•´å¯ï¼ˆ180ã€œ220ãã‚‰ã„ï¼‰ */
}


/* ===== ã‚¹ãƒˆãƒ¼ãƒªãƒ¼è­¦å‘Šã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ ===== */
.story-warning{
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: calc(100% - 28px);
  background: rgba(0,0,0,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

.story-warning.hidden{
  display: none;
}

.story-warning-box{
  background: #fff;
  color: #000;
  width: 85%;
  max-width: 320px;
  border-radius: 14px;
  padding: 18px;
  font-size: 14px;
  line-height: 1.6;
  box-shadow: 0 10px 30px rgba(0,0,0,0.4);
  text-align: center;
}

.story-warning-box strong{
  color: #d00000;
}

/* ===== ã‚¹ãƒˆãƒ¼ãƒªãƒ¼è¿½åŠ ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆï¼‹ï¼‰ ===== */
.story-ring{
  position: relative;
}

.story-add{
  position: absolute;
  right: -2px;
  bottom: -2px;
  width:18px;
  height:18px;
  border-radius:50%;
  background:#0095f6;
  color:#fff;
  font-size:12px;
  font-weight:800;
  display:flex;
  align-items:center;
  justify-content:center;
  border:2px solid #fff;
  box-sizing:border-box;
}

/* ãƒ›ãƒ¼ãƒ å…¨ä½“ã¯ã‚¯ãƒªãƒƒã‚¯ç„¡åŠ¹ */
.home{
  pointer-events: none;
}

/* ã‚¢ã‚¤ã‚³ãƒ³ã ã‘ã‚¯ãƒªãƒƒã‚¯æœ‰åŠ¹ */
.app-icon{
  pointer-events: auto;
  cursor: pointer;
}


/* DMé€šçŸ¥ãƒãƒ¼ */
.dm-notice{
  background:#1d9bf0;
  color:#fff;
  padding:10px;
  font-size:14px;
  text-align:center;
  cursor:pointer;
}


/* ===== DMè¿”ä¿¡ï¼ˆè¿½åŠ ï¼‰ ===== */
.dm-reply{
  margin:8px 0;
  padding:10px;
  background:#e8f5ff;
  border-radius:10px;
  font-size:14px;
}

.dm-reply.me{
  background:#d1ffd6;
  text-align:right;
}




/* ===== DMãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºèª¿æ•´ï¼ˆè¿½åŠ ï¼‰ ===== */

/* å…±é€šï¼ˆå¹ãå‡ºã—é¢¨ï¼‰ */
.dm-reply{
  max-width: 75%;          /* æ¨ªå¹…ã‚’åˆ¶é™ */
  margin: 6px 0;
  padding: 10px 12px;
  border-radius: 14px;
  font-size: 14px;         /* ç›¸æ‰‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã‚„ã‚„å°ã•ã‚ */
  line-height: 1.5;
  word-wrap: break-word;
}

/* ç›¸æ‰‹ï¼ˆå·¦å¯„ã›ï¼‰ */
.dm-reply:not(.me){
  background: #f1f3f5;
  color: #000;
  margin-right: auto;     /* å·¦å¯„ã› */
  text-align: left;
}

/* è‡ªåˆ†ï¼ˆå³å¯„ã›ãƒ»å°‘ã—å¤§ããï¼‰ */
.dm-reply.me{
  background: #d1ffd6;
  color: #000;
  margin-left: auto;      /* å³å¯„ã› */
  text-align: left;       /* æ–‡ç« ã¯å·¦æƒãˆã®ã¾ã¾ */
  font-size: 15px;        /* è‡ªåˆ†ã®æ–¹ã‚’å°‘ã—å¤§ãã */
}



/* ===== åˆæœŸDMï¼ˆç›¸æ‰‹ï¼‰ã®è¡¨ç¤ºçµ±ä¸€ï¼ˆè¿½åŠ ï¼‰ ===== */

/* æœ€åˆã«è¡¨ç¤ºã•ã‚Œã‚‹DMï¼ˆwarningä»˜ãï¼‰ã‚’ç›¸æ‰‹DMæ‰±ã„ã« */
.dm.warning{
  max-width: 75%;
  margin: 6px auto 6px 0;   /* å·¦å¯„ã› */
  padding: 10px 12px;
  border-radius: 14px;
  background: #f1f3f5;     /* ç›¸æ‰‹DMã¨åŒã˜èƒŒæ™¯è‰² */
  font-size: 14px;
  line-height: 1.5;
  text-align: left;
  color: #000;
  border: none;            /* warningæ æ„Ÿã‚’æ¶ˆã™ */
}

/* ä¸­ã®æ–‡å­—è£…é£¾ã‚‚DMé¢¨ã« */
.dm.warning .from{
  font-weight: 700;
  margin-bottom: 6px;
}

.dm.warning .text{
  white-space: pre-wrap;
}

/* ===== æ·»ä»˜ç”»åƒï¼ˆæŠ•ç¨¿ãƒ»DMå…±é€šï¼‰ ===== */
.attached-image{
  margin-top:8px;
  border-radius:12px;
  max-width:100%;
  height:auto;
  border:1px solid #ddd;
}

/* ===== X ä¸‹éƒ¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ ===== */
.x-bottom-nav{
  height: 52px;
  border-top: 1px solid #e6ecf0;
  display: flex;
  justify-content: space-around;
  align-items: center;
  font-size: 22px;
  background: #fff;
}

.x-bottom-nav span{
  cursor: pointer;
  color: #536471;
}

.x-bottom-nav span.active{
  color: #1d9bf0;
}

.x-bottom-nav{
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 52px;
  border-top: 1px solid #e6ecf0;
  display: flex;
  justify-content: space-around;
  align-items: center;
  font-size: 22px;
  background: #fff;
  z-index: 30;
}

/* ===== Xç³»ç”»é¢ã¯ä¸‹éƒ¨ãƒŠãƒ“åˆ†ã®ä½™ç™½ã‚’ç¢ºä¿ ===== */
#xapp,
#dmList,
#dmRoom{
  padding-bottom: 52px;   /* ãƒŠãƒ“ã®é«˜ã•ã¨åŒã˜ */
  box-sizing: border-box;
}

.x-bottom-nav.hidden{
  display: none !important;
}

/* ===== DMæœªèª­è¡¨ç¤º ===== */
.dm-item.unread{
  background: transparent;
}

.dm-item.unread::before{
  content:"â—";
  color:#1D9BF0;
  font-size:10px;
  margin-right:8px;
}

/* ===== ä¸‹éƒ¨ãƒŠãƒ“ DMæœªèª­ãƒ‰ãƒƒãƒˆ ===== */
#dmNav{
  position: relative;
}

#dmNav.unread::after{
  content:"â—";
  position:absolute;
  top:4px;
  right:-2px;
  font-size:10px;
  color:#1D9BF0;
}

/* ===== Xé¢¨ å³ä¸‹ï¼‹ãƒœã‚¿ãƒ³ ===== */
.x-fab{
  position: absolute;
  right: 16px;
  bottom: 70px;          /* ä¸‹éƒ¨ãƒŠãƒ“ã«ã‹ã¶ã‚‰ãªã„ */
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: #1d9bf0;
  color: #fff;
  font-size: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 40;
}

.compose-modal{
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.5);
  display: flex;
  align-items: flex-end;
  z-index: 50;
}

.compose-box{
  background: #fff;
  width: 100%;
  padding: 12px;
  border-radius: 16px;

  margin-bottom: 60px;   /* â† ã“ã“ã‚’å¢—æ¸› */
}


/* æ—§æŠ•ç¨¿æ¬„ã‚’éè¡¨ç¤ºï¼ˆï¼‹æ–¹å¼ã«çµ±ä¸€ï¼‰ */
#xapp > .compose{
  display: none;
}

.cancel-btn{
  background: #e6ecf0;
  border: none;
  color: #0f1419;
  font-size: 14px;
  padding: 6px 12px;
  border-radius: 4px;   /* â† å››è§’ */
  cursor: pointer;
}

.compose-top{
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

/* ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼ˆå·¦ï¼‰ */
.cancel-btn{
  background: none;
  border: none;
  color: #536471;
  font-size: 15px;
  cursor: pointer;
}

/* æŠ•ç¨¿ï¼ˆå³ï¼‰ */
.post-btn{
  background: #1d9bf0;
  border: none;
  color: #fff;
  font-size: 14px;
  font-weight: 700;
  padding: 6px 14px;
  border-radius: 4px;   /* â† å››è§’ */
  cursor: pointer;
}

#textInput{
  width: 100%;
  box-sizing: border-box;
}

#textInput{
  resize: none;
}

#textInput{
  width: 100%;
  box-sizing: border-box;
  resize: none;
}

.text-wrap{
  position: relative;
}

.text-wrap #exampleSelect{
  position: absolute;
  top: 6px;
  right: 6px;
  font-size: 12px;
  padding: 2px 4px;
  opacity: 0.85;
}

#textInput{
  padding-top: 30px;
}

/* ===== ã‚¹ãƒãƒ›ã§ã¯ç”»é¢ãƒ”ãƒƒã‚¿ãƒªè¡¨ç¤º ===== */
@media (max-width: 600px) {

  body{
    margin: 0;
    background: #000;   /* ä½™ç™½å¯¾ç­– */
  }

  .phone{
    width: 100vw;
    height: 100%;
    margin: 0;
    border-radius: 0;
    box-shadow: none;
  }

  .statusbar{
    padding-top: env(safe-area-inset-top);
  }

  .home,
  .appscreen,
  .story-view{
    height: calc(100vh - 28px);
  }
}


@media (max-width: 600px){

  /* ä¸Šéƒ¨ã®é»’å¸¯ã¯ã‚¹ãƒãƒ›ã§ã¯ä¸è¦ */
  .statusbar{
    display: none;
  }

  /* ä¸Šã«ãšã‚‰ã—ã¦ã„ãŸåˆ†ã‚’ãƒªã‚»ãƒƒãƒˆ */
  .home,
  .appscreen,
  .story-view{
    top: 0;
    height: 100%;
  }

  /* Xä¸‹éƒ¨ãƒŠãƒ“ã¯å¸¸ã«è¡¨ç¤º */
  .x-bottom-nav{
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    z-index: 100;
  }

}

@media (max-width: 600px){

  /* DMç”»é¢ã®é«˜ã•ã ã‘æŒ‡å®šï¼ˆè¡¨ç¤ºåˆ¶å¾¡ã«ã¯è§¦ã‚‰ãªã„ï¼‰ */
  #dmRoom{
    height: 100vh;
  }

  /* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§ã ã‘ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
  #dmRoom .timeline{
    overflow-y: auto;
    padding-bottom: 70px;
  }

  
}

@media (max-width: 600px){

  /* DMå…¥åŠ›æ¬„ã¯æ‹¡å¤§ã•ã›ãªã„ */
  #dmRoom textarea,
  #dmRoom #dmInput{
    height: 44px;          /* å›ºå®šé«˜ã•ï¼ˆå®Ÿã‚¢ãƒ—ãƒªç›¸å½“ï¼‰ */
    min-height: 44px;
    max-height: 44px;

    resize: none;          /* æ‰‹å‹•ãƒªã‚µã‚¤ã‚ºç„¡åŠ¹ */
    overflow-y: hidden;    /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚‚å‡ºã•ãªã„ */
    line-height: 1.4;
  }

}

@media (max-width: 600px){

  /* DMå…¥åŠ›æ¬„ã ã‘ã‚’å›ºå®šï¼ˆä»–ã«å½±éŸ¿ã•ã›ãªã„ï¼‰ */
  #dmRoom > .compose textarea{
    height: 44px;
    min-height: 44px;
    max-height: 44px;

    resize: none;
    overflow-y: hidden;
    line-height: 1.4;
  }

}

@media (max-width: 600px){

  /* iOSã®è‡ªå‹•ã‚ºãƒ¼ãƒ é˜²æ­¢ï¼ˆæœ€é‡è¦ï¼‰ */
  #dmRoom > .compose textarea{
    font-size: 16px;   /* â† ã“ã‚Œã§æ‹¡å¤§ã—ãªããªã‚‹ */
  }

}

/* DMç”»é¢ï¼šabsolute ã®åŸºæº–ã«ã™ã‚‹ï¼ˆå¸¸æ™‚ï¼‰ */
#dmRoom{
  position: relative;
}

/* DMç”»é¢ï¼šè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹æ™‚ã ã‘ flex ã«ã™ã‚‹ */
#dmRoom:not(.hidden){
  display: flex;
  flex-direction: column;
}

/* DMå…¥åŠ›æ¬„ã®æ¨ªã¯ã¿å‡ºã—é˜²æ­¢ */
#dmRoom .compose textarea{
  box-sizing: border-box;
}

/* â˜…ã€è¿½åŠ ã€‘DMè¿”ä¿¡æ¬„ã‚’ç”»é¢ä¸‹ã«å›ºå®šï¼ˆã‚¹ãƒãƒ›ã®ã¿ï¼‰ */
@media (max-width: 600px){
  #dmRoom > .compose{
    position: fixed;
    bottom: 40px;        /* ä¸‹éƒ¨ãƒŠãƒ“ã®é«˜ã• */
    left: 0;
    width: 100%;
    background: #fff;
    z-index: 120;
    box-sizing: border-box;
  }
}





</style>
</head>

<body>

<div class="phone">
  <div class="statusbar"><span>20:15</span><span>ğŸ“¶ ğŸ”‹</span></div>

  <!-- ãƒ›ãƒ¼ãƒ  -->
  <div class="home" id="home">

   <div class="app" onclick="openX()">
  <div class="app-icon">
    N
    <span class="badge" id="dmBadge">1</span>
  </div>
  N
</div>

    <div class="app" onclick="openInstagram()">
      <div class="app-icon instagram">
        <svg viewBox="0 0 24 24">
          <path d="M7 2C4.2 2 2 4.2 2 7v10c0 2.8 2.2 5 5 5h10c2.8 0 5-2.2 5-5V7c0-2.8-2.2-5-5-5H7z"/>
        </svg>
      </div>
      Narastagram
    </div>
  </div>

  <!-- X -->

<!-- DMå°‚ç”¨ç”»é¢ -->

<!-- DMä¸€è¦§ç”»é¢ -->
<div class="appscreen hidden" id="dmList">
  <div class="header">
    <div class="back" onclick="backToX()">â†</div>
    <div class="title">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</div>
    <div class="back"></div>
  </div>

  <div class="timeline">
    <div class="dm-item" id="dmItem_job" onclick="openDM('job_support')">

      <div class="icon"></div>
      <div class="body">
        <div class="name">
          çŸ¥ã‚‰ãªã„äºº <span class="id">@job_support</span>
        </div>
        <div class="preview">
          ç°¡å˜ã«ç¨¼ã’ã‚‹ä»•äº‹ã‚’æ¢ã—ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ
        </div>
      </div>
    </div>
  </div>
</div>


<!-- å€‹åˆ¥DMç”»é¢ -->
<div class="appscreen hidden" id="dmRoom">
  <div class="header">
    <div class="back" onclick="backToDMList()">â†</div>
    <div class="title" id="dmRoomTitle">DM</div>
    <div class="back"></div>
  </div>

  <div class="timeline" id="dmTimeline"></div>

  <div class="compose">
    <textarea id="dmInput" placeholder="è¿”ä¿¡ã‚’æ›¸ãâ€¦"></textarea>
    <button onclick="sendDM()">é€ä¿¡</button>
  </div>
</div>

  <div class="header">
    <div class="back" onclick="backToX()">â†</div>
    <div class="title">ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</div>
    <div class="back"></div>
  </div>

  <div class="appscreen hidden" id="xapp">

    <div class="header">

      <div class="back" onclick="backHome()">â†</div>
      <div class="title">N</div>
      <div class="back"></div>
    </div>
    <div class="progress"><span id="bar"></span></div>

<div class="dm-notice hidden" id="dmNotice">
  ğŸ“© æ–°ã—ã„ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚Šã¾ã™
</div>

    <div class="timeline" id="timeline"></div>

<div class="compose-modal hidden" id="composeModal">
  

<div class="compose-box">

    <!-- ä¸Šéƒ¨ãƒœã‚¿ãƒ³è¡Œ -->
    <div class="compose-top">
      <button class="cancel-btn" onclick="closeComposer()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="post-btn" onclick="submitPost()">æŠ•ç¨¿</button>
    </div>

<div class="text-wrap">
<select id="exampleSelect" onchange="applyExample()">
  <option value="">ç‚ä¸Šä¾‹ï¼ˆæ•™æç”¨ï¼‰ã‚’é¸æŠã€€â€»é€šå¸¸æŠ•ç¨¿ã¯é¸æŠã—ãªã„</option>
</select>
</div>

    <!-- å…¥åŠ›æ¬„ -->
    <textarea id="textInput" placeholder="ã„ã¾ã©ã†ã—ã¦ã‚‹ï¼Ÿ"></textarea>
    <input type="file" id="postImage" accept="image/*">
<div id="exifInfo" style="font-size:13px;color:#d00000;margin-top:6px;"></div>

  </div>
</div>

   <div class="compose">

  <select id="exampleSelect" onchange="applyExample()">

        <option value="">ç‚ä¸Šä¾‹ï¼ˆæ•™æç”¨ï¼‰ã‚’é¸æŠã€€â€»é€šå¸¸æŠ•ç¨¿ã¯é¸æŠã—ãªã„</option>
      </select>
      <textarea id="textInput_old" placeholder="ã„ã¾ã©ã†ã—ã¦ã‚‹ï¼Ÿ"></textarea>
<input type="file" id="postImage_old" accept="image/*">
      <button onclick="post()">æŠ•ç¨¿</button>
    </div>

<!-- ï¼‹æŠ•ç¨¿ãƒœã‚¿ãƒ³ -->
<div class="x-fab" onclick="openComposer()">ï¼‹</div>

<div class="x-bottom-nav hidden" id="xBottomNav">
  <span class="active" onclick="goXHome()">ğŸ </span>
  <span onclick="alert('æ¤œç´¢ç”»é¢ï¼ˆæ•™æç”¨ãƒ€ãƒŸãƒ¼ï¼‰')">ğŸ”</span>
  <span onclick="alert('é€šçŸ¥ç”»é¢ï¼ˆæ•™æç”¨ãƒ€ãƒŸãƒ¼ï¼‰')">ğŸ””</span>
  <span id="dmNav" onclick="openDMList()">âœ‰ï¸</span>

</div>

  </div>

  <!-- Instagram -->
  <div class="appscreen hidden" id="insta">
    <div class="header">
      <div class="back" onclick="backHome()">â†</div>
      <div class="title">Narastagram</div>
      <div class="back"></div>
    </div>

    <div class="stories">

<div class="story me" onclick="event.stopPropagation()">
  <div class="story-ring">
    <div class="story-inner"></div>
    <div class="story-add">ï¼‹</div>
  </div>
  ã‚ãªãŸ
</div>

      <div class="story" onclick="openStory()">

        <div class="story-ring"><div class="story-inner"></div></div>A
      </div>
      
    </div>

    <div class="insta-feed">
      <div class="insta-post">
        <div class="insta-header">ã‚ãªãŸ</div>
        <div class="insta-photo"></div>
        <div class="insta-actions">â¤ï¸ 12ã€€ğŸ’¬ 3</div>
      </div>
    </div>
  </div>

  <!-- ã‚¹ãƒˆãƒ¼ãƒªãƒ¼å†ç”Ÿç”»é¢ -->
  <div class="story-view hidden" id="storyView">

<div class="story-warning hidden" id="storyWarning">
  <div class="story-warning-box">
    <strong>ãã®æ“ä½œã€æœ¬å½“ã«å¤§ä¸ˆå¤«ï¼Ÿ</strong><br><br>
    ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã¸ã®åå¿œã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã€<br>
    æ›¸ã‹ã‚ŒãŸç›¸æ‰‹ã‚’å‚·ã¤ã‘ãŸã‚Šã€<br>
    ãã®è¡Œç‚ºã«åŠ æ‹…ã™ã¦ã—ã¾ã†<br>
    å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚<br><br>
    <em>åå¿œã›ãšã«ä¿¡é ¼ã§ãã‚‹å¤§äººã«ç›¸è«‡ã—ã¦ãã ã•ã„ã€‚</em>
  </div>
</div>

    <div class="story-top">
      <div>Aã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼</div>
      <div class="story-close" onclick="closeStory()">âœ•</div>
    </div>
    <div class="story-video">
      <div class="story-text">
        ã‚ã®äººãƒã‚¸ã§ç„¡ç†ã€‚ãã‚‰ã„ã€‚<br>
  
      </div>
<div class="story-bottom">
  <input class="story-message" type="text" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡">
  <div class="story-like" onclick="toggleLike(this)">â™¡</div>
</div>

    </div>

  </div>

</div>

<script>
const home=document.getElementById("home");
const xapp=document.getElementById("xapp");
const insta=document.getElementById("insta");
const storyView=document.getElementById("storyView");
const timeline=document.getElementById("timeline");
const bar=document.getElementById("bar");
const textInput=document.getElementById("textInput");
const exampleSelect=document.getElementById("exampleSelect");

const xBottomNav = document.getElementById("xBottomNav");

function showXNav(){
  xBottomNav.classList.remove("hidden");
}

function hideXNav(){
  xBottomNav.classList.add("hidden");
}

// â˜… åˆæœŸè¡¨ç¤ºã§ã¯å¿…ãšéè¡¨ç¤º
hideXNav();

const dmNotice = document.getElementById("dmNotice");

let dmRead = false;   // â˜… DMã‚’èª­ã‚“ã ã‹ã©ã†ã‹

const dmTemplates = [
  {
    name: "çŸ¥ã‚‰ãªã„äºº",
    id: "@job_support",
    text: `ç°¡å˜ã«ç¨¼ã’ã‚‹ä»•äº‹ã‚’æ¢ã—ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ

ãƒ»ã‚¹ãƒãƒ›ã ã‘
ãƒ»å³æ—¥â—¯ä¸‡å††
ãƒ»å¹´é½¢ä¸å•

èˆˆå‘³ã‚ã‚Œã°è¿”ä¿¡ãã ã•ã„ã€‚
â€»èº«åˆ†è¨¼å¿…é ˆ`
  },
  {
    name: "å‰¯æ¥­æ¡ˆå†…ã‚»ãƒ³ã‚¿ãƒ¼",
    id: "@sidework_info",
    text: `ã€é™å®šæ¡ˆå†…ã€‘
å‰¯æ¥­ãƒ¢ãƒ‹ã‚¿ãƒ¼å‹Ÿé›†ã®ãŠçŸ¥ã‚‰ã›ã§ã™ã€‚

åˆæœŸè²»ç”¨ãªã—
èª°ã§ã‚‚å‚åŠ å¯èƒ½
å ±é…¬ã¯å½“æ—¥æ”¯æ‰•ã„

è©³ç´°å¸Œæœ›ã®æ–¹ã¯è¿”ä¿¡ã—ã¦ãã ã•ã„ã€‚`
  },
  {
    name: "æŠ•è³‡ã‚µãƒãƒ¼ãƒˆçª“å£",
    id: "@invest_plus",
    text: `æŠ•è³‡ã«èˆˆå‘³ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ
çŸ¥äººé™å®šã®æƒ…å ±ã§ã™ã€‚

å…ƒæœ¬ä¿è¨¼ã‚ã‚Š
ãƒªã‚¹ã‚¯ã¯æœ€å°é™
å­¦ç”Ÿã§ã‚‚å¯èƒ½

ã“ã®DMã¯å‰Šé™¤ã—ã¦ãã ã•ã„ã€‚`
  },
  {
    name: "æ¡ç”¨æ‹…å½“",
    id: "@recruit_office",
    text: `ã‚ãªãŸã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’è¦‹ã¦é€£çµ¡ã—ã¾ã—ãŸã€‚
ç‰¹åˆ¥ãªãŠä»•äº‹ã‚’ã”æ¡ˆå†…ã§ãã¾ã™ã€‚

æ¡ä»¶ãŒåˆãˆã°é«˜åå…¥ãŒå¯èƒ½ã§ã™ã€‚
ã¾ãšã¯è¿”ä¿¡ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚`
  }
];

function getRandomDM(){
  return dmTemplates[Math.floor(Math.random() * dmTemplates.length)];
}

let dmThreads = {};
let currentDMUser = null;

/* ç‚ä¸Šä¾‹ï¼ˆtypeä»˜ãï¼‰ */
const flameExamples=[
  {label:"â‘  å·®åˆ¥çš„ç™ºè¨€", type:"discrimination", text:"æ­£ç›´è¨€ã£ã¦ã€ç¨é‡‘ä½¿ã£ã¦ã¾ã§å¤–å›½äººã‚’æ”¯æ´ã™ã‚‹æ„å‘³ãŒåˆ†ã‹ã‚‰ãªã„ã€‚ã€‡ã€‡äººã¯æ”¯æ´ã™ã‚‹ãªï¼"},
  {label:"â‘¡ ãƒã‚¤ãƒˆãƒ†ãƒ­", type:"baito", text:"ãƒã‚¤ãƒˆä¸­ã ã‘ã©ã€åº—ã®å†·è”µåº«ã«å…¥ã£ã¦ã¿ãŸw"},
  {label:"â‘¢ å¼±è€…è”‘è¦–", type:"weak", text:"åŠªåŠ›ã—ãªã„äººã‚’åŠ©ã‘ã‚‹å¿…è¦ã£ã¦ã‚ã‚‹ï¼Ÿ"},
  {label:"â‘£ ç½å®³ä¸è¬¹æ…", type:"disaster", text:"ã¾ãŸç½å®³ï¼Ÿã‚‚ã†æ…£ã‚ŒãŸã€‚"},
  {label:"â‘¤ æ™’ã—æŠ•ç¨¿", type:"expose", text:"ã“ã®åº—å“¡ã²ã©ã„ã€‚åå‰ã‚‚åˆ†ã‹ã£ãŸã€‚"},
  {label:"â‘¥ è·æ¥­åè¦‹", type:"job", text:"â—‹â—‹è·ã£ã¦ã“ã®ç¨‹åº¦ã ã‚ˆã­ã€‚"}
];

/* â˜… è­¦å‘Šæ–‡ï¼ˆå®Œå…¨ä¿æŒï¼‰ */
const warningMessages={
  discrimination:`
    ãƒ»å·®åˆ¥çš„è¨€å‹•ã¨ã—ã¦å•é¡Œè¦–ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™<br>
    ãƒ»<b>åˆ‘æ³•230æ¡ï¼ˆåèª‰æ¯€æï¼‰</b>ã«æŠµè§¦ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™<br>
    ãƒ»<b>å¥ˆè‰¯çœŒäººæ¨©å°Šé‡ã®ç¤¾ä¼šã¥ãã‚Šæ¡ä¾‹</b>ã®è¶£æ—¨ã«åã™ã‚‹ã¨åˆ¤æ–­ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™<br>
    ãƒ»<b>äº¬éƒ½åºœäººæ¨©å°Šé‡ã®å…±ç”Ÿç¤¾ä¼šã¥ãã‚Šæ¡ä¾‹</b>ã®è¶£æ—¨ã«åã™ã‚‹è¡Œç‚ºã¨ã¿ãªã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
  `,
  baito:`
    ãƒ»æ¥­å‹™å¦¨å®³ã¨ã—ã¦ä¼æ¥­ãŒå¯¾å¿œã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™<br>
    ãƒ»<b>åˆ‘æ³•233æ¡ï¼ˆä¿¡ç”¨æ¯€æãƒ»æ¥­å‹™å¦¨å®³ï¼‰</b>ã«æŠµè§¦ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™<br>
    ãƒ»å¥‘ç´„é•åã‚„å°±æ¥­è¦å‰‡é•åã¨ã—ã¦å‡¦åˆ†ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™
  `,
  weak:`
    ãƒ»äººæ ¼å¦å®šã¨ã—ã¦ç‚ä¸ŠãŒé•·æœŸåŒ–ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™<br>
    ãƒ»<b>åˆ‘æ³•230æ¡ï¼ˆåèª‰æ¯€æï¼‰</b>ã«è©²å½“ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
  `,
  disaster:`
    ãƒ»è¢«ç½è€…æ„Ÿæƒ…ã‚’è‘—ã—ãå®³ã™ã‚‹è¡¨ç¾ã¨ã—ã¦æ‰¹åˆ¤ã‚’å—ã‘ã¾ã™<br>
    ãƒ»<b>å¥ˆè‰¯çœŒäººæ¨©å°Šé‡ã®ç¤¾ä¼šã¥ãã‚Šæ¡ä¾‹</b>ã®è¶£æ—¨ã«åã™ã‚‹è¡Œç‚ºã¨åˆ¤æ–­ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
  `,
  expose:`
    ãƒ»å€‹äººæƒ…å ±ã®å…¬é–‹ã¨ã—ã¦é‡å¤§ãªå•é¡Œã«ãªã‚Šã¾ã™<br>
    ãƒ»<b>åˆ‘æ³•230æ¡ï¼ˆåèª‰æ¯€æï¼‰</b>ã€<b>æ°‘æ³•709æ¡ï¼ˆä¸æ³•è¡Œç‚ºï¼‰</b>ã«æŠµè§¦ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™<br>
    ãƒ»<b>äº¬éƒ½åºœå€‹äººæƒ…å ±ä¿è­·æ¡ä¾‹</b>ã®è¶£æ—¨ã«åã™ã‚‹ã¨åˆ¤æ–­ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
  `,
  job:`
    ãƒ»è·æ¥­å·®åˆ¥ã¨ã—ã¦å•é¡Œè¦–ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™<br>
    ãƒ»<b>å¥ˆè‰¯çœŒäººæ¨©å°Šé‡ã®ç¤¾ä¼šã¥ãã‚Šæ¡ä¾‹</b>ã€<b>äº¬éƒ½åºœäººæ¨©å°Šé‡ã®å…±ç”Ÿç¤¾ä¼šã¥ãã‚Šæ¡ä¾‹</b>ã®è¶£æ—¨ã«åã™ã‚‹è¡Œç‚ºã¨ã¿ãªã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
  `,
  default:`
    ãƒ»å‰Šé™¤å¾Œã‚‚æ‹¡æ•£ãƒ»æ‰¹åˆ¤ãŒç¶šãå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™<br>
    ãƒ»å†…å®¹ã«ã‚ˆã£ã¦ã¯æ³•å¾‹ã‚„æ¡ä¾‹ã«æŠµè§¦ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
  `
};

flameExamples.forEach((ex,i)=>{
  const o=document.createElement("option");
  o.value=i;
  o.textContent=ex.label;
  exampleSelect.appendChild(o);
});

function applyExample(){
  if(exampleSelect.value==="")return;
  textInput.value=flameExamples[exampleSelect.value].text;
}

const normalComments=["å¤§ä¸ˆå¤«ï¼Ÿ","ä¸ç”¨æ„ã§ã¯","ç‡ƒãˆãã†","èª¤è§£ã•ã‚Œã‚‹"];
const harshComments=["ã‚¢ã‚¦ãƒˆ","é­šæ‹“æ¸ˆ","ç‰¹å®šç­","é€šå ±ã—ã¾ã—ãŸ"];
const rand=(a,b)=>Math.floor(Math.random()*(b-a+1))+a;

function openX(){
  home.classList.add("hidden");
  insta.classList.add("hidden");
  xapp.classList.remove("hidden");
  showXNav();

  // é€šå¸¸ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤º
  timeline.classList.remove("hidden");
 

  // DMé€šçŸ¥ãƒãƒ¼
  if(!dmRead){
    dmNotice.classList.remove("hidden");
  }else{
    dmNotice.classList.add("hidden");
  }

  // â˜… DMãƒªã‚¹ãƒˆæœªèª­è‰²åˆ¶å¾¡ï¼ˆã“ã“ã ã‘ï¼‰
  const dmItem = document.getElementById("dmItem_job");
  if(dmItem){
    if(!dmRead){
      dmItem.classList.add("unread");
    }else{
      dmItem.classList.remove("unread");
    }
  }
}

dmNotice.onclick = ()=>{
  dmNotice.classList.add("hidden");
  dmRead = true;

  xapp.classList.add("hidden");
  dmList.classList.remove("hidden");
};

function backToX(){
  dmList.classList.add("hidden");
  dmRoom.classList.add("hidden");
  xapp.classList.remove("hidden");
showXNav();
}

function backHome(){
  xapp.classList.add("hidden");
  insta.classList.add("hidden");
  dmList.classList.add("hidden");
  dmRoom.classList.add("hidden");
  home.classList.remove("hidden");
  hideXNav();

  if(dmRead){
    const badge = document.getElementById("dmBadge");
    if(badge) badge.style.display = "none";
    scheduleNewDM();
  }
}

function openInstagram(){
  home.classList.add("hidden");
  xapp.classList.add("hidden");
  insta.classList.remove("hidden");
  hideXNav();
}

function openStory(){
  storyView.classList.remove("hidden");
}
function closeStory(){
  storyView.classList.add("hidden");
}

function post(){
 let timer = null;
  const t=textInput.value.trim();
  if(!t)return;

  const type=exampleSelect.value!=="" ? flameExamples[exampleSelect.value].type : "default";
  const state={severity:0,views:0,replies:0,type};
  const postDiv=document.createElement("div");
  postDiv.className="post";
  postDiv.innerHTML=`
    <div class="icon"></div>
    <div class="body">
      <div class="name">ã‚ãªãŸ<span class="id">@user</span></div>


      <div class="text">${t}</div>
<img class="attached-image" style="display:none;">
<div class="meta">

        <span class="views">ğŸ‘ 0</span>
        <span class="replies">ğŸ’¬ 0</span>
        <span class="reposts">ğŸ” 0</span>
        <span class="likes">â¤ï¸ 0</span>
        <span class="delete" style="color:#f4212e;cursor:pointer;">ğŸ—‘ å‰Šé™¤</span>
      </div>
      <div class="replies-box"></div>
    </div>
  `;

  timeline.prepend(postDiv);

// ===== ç”»åƒæ·»ä»˜å‡¦ç†ï¼ˆã“ã“ã ã‘ï¼‰=====
const imageInput = document.getElementById("postImage");
const imageFile = imageInput.files[0];

if(imageFile){
  const img = postDiv.querySelector(".attached-image");
  const reader = new FileReader();
  reader.onload = e => {
    img.src = e.target.result;
    img.style.display = "block";
  };
  reader.readAsDataURL(imageFile);
  imageInput.value = ""; // æ¬¡ã®æŠ•ç¨¿ã«æ®‹ã•ãªã„
}

  const repliesBox=postDiv.querySelector(".replies-box");
  postDiv.querySelector(".body").onclick=()=>{
    repliesBox.style.display=repliesBox.style.display==="block"?"none":"block";
  };

  const meta={
    views:postDiv.querySelector(".views"),
    replies:postDiv.querySelector(".replies"),
    reposts:postDiv.querySelector(".reposts"),
    likes:postDiv.querySelector(".likes")
  };

 if (type === "default") {
  // ===== ç‚ä¸Šã—ãªã„æŠ•ç¨¿ =====
  // ===== ç‚ä¸Šã—ãªã„æŠ•ç¨¿ =====
const maxComments = rand(3, 6);
let posted = 0;
let likes = rand(2, 6);

const timer = setInterval(() => {

  // ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆ20æœªæº€ï¼‰
  if (posted < maxComments && state.replies < 19) {
    repliesBox.insertAdjacentHTML("beforeend", `
      <div class="reply">
        <div class="icon"></div>
        <div class="body">
          <div class="name">ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼<span class="id">@friend</span></div>
          <div class="text">${normalComments[rand(0, normalComments.length - 1)]}</div>
        </div>
      </div>
    `);
    posted++;
    state.replies++;
  }

  // ã„ã„ã­ï¼ˆ20æœªæº€ï¼‰
  if (likes < 19) {
    likes += rand(1, 2);
    if (likes > 19) likes = 19;
  }

  // è¦‹ãŸæ•°ï¼ˆ20æœªæº€ï¼‰
  if (state.views < 19) {
    state.views += rand(1, 4);
    if (state.views > 19) state.views = 19;
  }

  meta.views.textContent   = "ğŸ‘ " + state.views;
  meta.replies.textContent = "ğŸ’¬ " + state.replies;
  meta.reposts.textContent = "ğŸ” " + rand(0, 2);
  meta.likes.textContent   = "â¤ï¸ " + likes;

  // ã™ã¹ã¦ä¸Šé™ã«é”ã—ãŸã‚‰åœæ­¢
  if (state.views >= 19 && state.replies >= 19 && likes >= 19) {
    clearInterval(timer);
  }

}, 900);

  postDiv.querySelector(".delete").onclick = (e) => {
    e.stopPropagation();
    clearInterval(timer);
    postDiv.remove();
  };

} else {
  // ===== ç‚ä¸ŠæŠ•ç¨¿ï¼ˆå¾“æ¥ã©ãŠã‚Šï¼‰=====
  const timer = setInterval(() => {
    const pool = state.severity < 40 ? normalComments : harshComments;

    repliesBox.insertAdjacentHTML("beforeend", `
      <div class="reply">
        <div class="icon"></div>
        <div class="body">
          <div class="name">åŒ¿å<span class="id">@xxxx</span></div>
          <div class="text">${pool[rand(0, pool.length - 1)]}</div>
        </div>
      </div>
    `);

    state.replies++;
    state.severity = Math.min(100, state.severity + 2);

    const inc =
      state.severity < 30 ? rand(5, 20) :
      state.severity < 60 ? rand(50, 200) :
      rand(500, 3000);

    state.views += inc;

    meta.views.textContent = "ğŸ‘ " + state.views.toLocaleString();
    meta.replies.textContent = "ğŸ’¬ " + state.replies;
    meta.reposts.textContent = "ğŸ” " + Math.floor(state.views / 80);
    meta.likes.textContent = "â¤ï¸ " + Math.floor(state.views / 25);
  }, 600);

  postDiv.querySelector(".delete").onclick = (e) => {
    e.stopPropagation();
    clearInterval(timer);
    postDiv.remove();
  };
}

  postDiv.querySelector(".delete").onclick=(e)=>{
    e.stopPropagation();
    clearInterval(timer);
    postDiv.remove();

    const warn=document.createElement("div");
    warn.className="warning";
    warn.innerHTML=`
      <strong>æŠ•ç¨¿ã¯å‰Šé™¤ã•ã‚Œã¾ã—ãŸ</strong><br><br>
      ã€ã“ã®æŠ•ç¨¿å†…å®¹ã§èµ·ã“ã‚Šã†ã‚‹ã“ã¨ã€‘<br>
      ${warningMessages[state.type]||warningMessages.default}<br><br>
      <em>ã€Œæ¶ˆã—ãŸï¼ãªã‹ã£ãŸã“ã¨ã€ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚</em>
      <em>ã¾ãŸã€åŒ¿åã§ã‚ã£ã¦ã‚‚<b>ç™ºä¿¡è€…æƒ…å ±é–‹ç¤ºè«‹æ±‚</b>ã«ã‚ˆã‚ŠæŠ•ç¨¿è€…ãŒç‰¹å®šã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</em>
    `;
    timeline.prepend(warn);
  };

  textInput.value="";
  exampleSelect.value="";
}

function toggleLike(el){
  showStoryWarning();
}

const storyWarning = document.getElementById("storyWarning");

/* è­¦å‘Šè¡¨ç¤º */
function showStoryWarning(){
  storyWarning.classList.remove("hidden");
}

/* è­¦å‘Šã‚’ã‚¿ãƒƒãƒ—ã§é–‰ã˜ã‚‹ */
storyWarning.addEventListener("click", ()=>{
  storyWarning.classList.add("hidden");
});

/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¬„ã‚¯ãƒªãƒƒã‚¯ã§è­¦å‘Š */
document.querySelector(".story-message")
  .addEventListener("focus", showStoryWarning);

/* â™¡ã‚¯ãƒªãƒƒã‚¯ã§è­¦å‘Šï¼ˆæ—¢å­˜å‡¦ç†ã¯ä¿æŒï¼‰ */
const originalToggleLike = toggleLike;
toggleLike = function(el){
  originalToggleLike(el);
  showStoryWarning();
};

/* ===== DMè¿”ä¿¡é€ä¿¡å‡¦ç†ï¼ˆå®‰å…¨ç‰ˆãƒ»è¿½åŠ ï¼‰ ===== */
function sendDM(){
  const input = document.getElementById("dmInput");
  if(!input) return;

  const text = input.value.trim();
  if(!text) return;

  const dmTimeline = document.getElementById("dmTimeline");
  if(!dmTimeline) return;

  // è‡ªåˆ†ã®è¿”ä¿¡
  const reply = document.createElement("div");
  reply.className = "dm-reply me";
  reply.textContent = text;
  dmThreads[currentDMUser].push({
  from: "me",
  text: text
});

renderDM();

  input.value = "";
  dmTimeline.scrollTop = dmTimeline.scrollHeight;

  // é—‡ãƒã‚¤ãƒˆè¿½ã„è¾¼ã¿DMï¼ˆæ®µéšè¡¨ç¤ºï¼‰
  const messages = [
`é€£çµ¡ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚
è©³ã—ã„å†…å®¹ã‚’é€²ã‚ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’é€ã£ã¦ãã ã•ã„ã€‚

ã€Œæ°åã€
ã€Œå¹´é½¢ã€
ã€Œä½æ‰€ã€
ã€Œèº«åˆ†è¨¼(å­¦ç”Ÿè¨¼)ã®å†™çœŸã€`,

`ã¾ã æƒ…å ±ãŒå±Šã„ã¦ã„ã¾ã›ã‚“ã€‚
ã™ã§ã«ã‚„ã‚Šå–ã‚Šã‚’ã—ã¦ã„ã‚‹ãŸã‚ã€
é€”ä¸­ã§ã‚„ã‚ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚`,

`ã‚ãªãŸã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã¯ã™ã§ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚`,

`è­¦å¯Ÿãƒ»å­¦æ ¡ãƒ»å®¶æ—ãªã©ã¸
ç›¸è«‡ãƒ»é€šå ±ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã‚ãªãŸã‚’å®ˆã‚‹ãŸã‚ã«ã‚‚ã€
ä»Šã™ãè¿”ä¿¡ã—ã¦ãã ã•ã„ã€‚`
  ];

  // è¡¨ç¤ºã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼ˆmsï¼‰
  const delays = [1200, 10000, 16000, 22000];

  messages.forEach((msg, i) => {
    const delay = delays[i] ?? (22000 + (i - 3) * 5000);

    setTimeout(() => {
      const dm = document.createElement("div");
      dm.className = "dm-reply";
      dm.textContent = msg;
      dmHistory.push({ from:"other", text: msg });
renderDM();

      dmTimeline.scrollTop = dmTimeline.scrollHeight;
    }, delay);
  });
}

function scheduleNewDM(){
  setTimeout(() => {

    dmRead = false;

    const badge = document.getElementById("dmBadge");
    if(badge){
      badge.style.display = "flex";
      badge.textContent = "1";
    }

  }, 20000);
}

function openDM(user){

  dmRead = true;
  currentDMUser = user;

  const badge = document.getElementById("dmBadge");
  if(badge) badge.style.display = "none";

  dmList.classList.add("hidden");
  dmRoom.classList.remove("hidden");
  showXNav();

  // ã‚¹ãƒ¬ãƒƒãƒ‰ãŒãªã‘ã‚Œã°ä½œã‚‹
  if(!dmThreads[user]){
    const dm = getRandomDM();
    dmThreads[user] = [{
      from: "other",
      name: dm.name,
      id: dm.id,
      text: dm.text
    }];
  }

  // ã‚¿ã‚¤ãƒˆãƒ«å¤‰æ›´
  const first = dmThreads[user][0];
  dmRoomTitle.textContent = `${first.name} ${first.id}`;

  renderDM();
}

function backToDMList(){
  dmRoom.classList.add("hidden");
  dmList.classList.remove("hidden");
showXNav();
}

function backToX(){
  dmList.classList.add("hidden");
  dmRoom.classList.add("hidden");
  xapp.classList.remove("hidden");
showXNav();
}

function goXHome(){
  // DMç”»é¢ã‚’é–‰ã˜ã¦é€šå¸¸ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¸
  dmList.classList.add("hidden");
  dmRoom.classList.add("hidden");

  xapp.classList.remove("hidden");
  timeline.classList.remove("hidden");
  
}

function openDMList(){
  xapp.classList.add("hidden");
  dmList.classList.remove("hidden");
  showXNav();

  // â˜… æœªèª­è‰²ã®åæ˜ ã‚’ã“ã“ã§ã‚‚è¡Œã†
  const dmItem = document.getElementById("dmItem_job");
  if(dmItem){
    if(!dmRead){
      dmItem.classList.add("unread");
    }else{
      dmItem.classList.remove("unread");
    }
  }
}

function renderDM(){
  const dmTimeline = document.getElementById("dmTimeline");
  if(!dmTimeline || !currentDMUser) return;

  dmTimeline.innerHTML = "";

  dmThreads[currentDMUser].forEach(m => {
    const div = document.createElement("div");
    div.className = "dm-reply" + (m.from === "me" ? " me" : "");

    if(m.from === "other"){
      div.innerHTML =
        `<strong>${m.name}<span class="id">${m.id}</span></strong><br>${m.text}`;
    }else{
      div.textContent = m.text;
    }

    dmTimeline.appendChild(div);
  });

  dmTimeline.scrollTop = dmTimeline.scrollHeight;
}


function updateDMUnreadUI(){
  const dmItem = document.getElementById("dmItem_job");
  const dmNav  = document.getElementById("dmNav");

  if(!dmRead){
    if(dmItem) dmItem.classList.add("unread");
    if(dmNav)  dmNav.classList.add("unread");
  }else{
    if(dmItem) dmItem.classList.remove("unread");
    if(dmNav)  dmNav.classList.remove("unread");
  }
}

// ===== ï¼‹æŠ•ç¨¿ãƒœã‚¿ãƒ³ç”¨ï¼ˆè¿½åŠ ï¼‰ =====
function openComposer(){
  document.getElementById("composeModal").classList.remove("hidden");
}

document.getElementById("postImage").addEventListener("change", function(e){

  const file = e.target.files[0];
  const info = document.getElementById("exifInfo");
  info.innerHTML = "";

  if(!file) return;

  EXIF.getData(file, function(){

    const lat = EXIF.getTag(this, "GPSLatitude");
    const lon = EXIF.getTag(this, "GPSLongitude");
    const latRef = EXIF.getTag(this, "GPSLatitudeRef");
    const lonRef = EXIF.getTag(this, "GPSLongitudeRef");

   
    // åº¦åˆ†ç§’ â†’ åº¦
    function toDecimal(dms, ref){
      const deg = dms[0].numerator / dms[0].denominator;
      const min = dms[1].numerator / dms[1].denominator;
      const sec = dms[2].numerator / dms[2].denominator;
      let dec = deg + min / 60 + sec / 3600;
      if(ref === "S" || ref === "W") dec *= -1;
      return dec;
    }

    const latitude  = toDecimal(lat, latRef);
    const longitude = toDecimal(lon, lonRef);

    const mapUrl =
      `https://www.google.com/maps?q=${latitude},${longitude}&z=16`;

    info.innerHTML = `
      âš ï¸ <strong>ã“ã®ç”»åƒã«ã¯ä½ç½®æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™</strong><br>
      ç·¯åº¦ï¼š${latitude.toFixed(5)}<br>
      çµŒåº¦ï¼š${longitude.toFixed(5)}<br>
      <a href="${mapUrl}" target="_blank">
        ğŸ“ åœ°å›³ã§ã“ã®å ´æ‰€ã‚’ç¢ºèªã™ã‚‹
      </a><br>
      <span style="color:#333;font-size:12px;">
        â€» ã“ã®æƒ…å ±ã‹ã‚‰æ’®å½±å ´æ‰€ãŒæ¨æ¸¬ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
      </span>
    `;
  });
});

function submitPost(){
  post();  // â† æ—¢å­˜ã®æŠ•ç¨¿å‡¦ç†ã‚’å‘¼ã¶
  document.getElementById("composeModal").classList.add("hidden");
}

function closeComposer(){
  document.getElementById("composeModal").classList.add("hidden");
}

function receiveNewDM(){
  const dm = getRandomDM();
  const userKey = dm.id;   // â† ã“ã‚ŒãŒã‚¹ãƒ¬ãƒƒãƒ‰ã®ã‚­ãƒ¼

  // æ—¢å­˜ã‚¹ãƒ¬ãƒƒãƒ‰ãŒãªã‘ã‚Œã°ä½œæˆ
  if(!dmThreads[userKey]){
    dmThreads[userKey] = [];
  }

  dmThreads[userKey].push({
    from: "other",
    name: dm.name,
    id: dm.id,
    text: dm.text
  });

  // æœªèª­ç®¡ç†
  dmRead = false;

  const badge = document.getElementById("dmBadge");
  if(badge){
    badge.style.display = "flex";
    badge.textContent = Object.keys(dmThreads).length;
  }

  updateDMList();
}












</script>

<script src="https://cdn.jsdelivr.net/npm/exif-js"></script>

</body>
</html>




